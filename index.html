<script>
async function generateVideo() {

  const prompt = document.getElementById("prompt").value;

  if (!prompt) {
    alert("Please enter a prompt first");
    return;
  }

  try {

    const response = await fetch("/api/generate", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ prompt })
    });

    const data = await response.json();

    if (data.image) {
      // Image show on same page
      const img = document.createElement("img");
      img.src = data.image;
      img.style.maxWidth = "100%";
      img.style.marginTop = "20px";
      document.body.appendChild(img);
    } 
    else {
      alert(data.error || "Generation failed");
    }

  } catch (error) {
    alert("Server error");
  }

}
</script>